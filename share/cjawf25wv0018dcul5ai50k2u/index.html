<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="huangwang"><meta name="description" content="技术宅（划掉）|（伪）二次元|"><link rel="alternative" href="/atom.xml" title="HUANGWANG'S BLOG" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>原来还能这样拔草！ - HUANGWANG'S BLOG</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0;"><header class="head"><h1 class="head-title u-fl"><a href="/">HUANGWANG'S BLOG</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">MENU</a></li><li class="head-nav__item"><a class="head-nav__link" href="/about">ABOUT</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2017-11-01T18:17:16.000Z">November 2, 2017</time><h1 class="post__title"><a href="/share/cjawf25wv0018dcul5ai50k2u/">原来还能这样拔草！</a></h1><div class="post__main echo"><h3 id="What-is-polygon"><a href="#What-is-polygon" class="headerlink" title="What is polygon?"></a>What is polygon?</h3><p>In <a href="https://en.wikipedia.org/wiki/Elementary_geometry" target="_blank" rel="noopener">elementary geometry</a>, a <strong>polygon</strong> (<a href="https://en.wikipedia.org/wiki/Help:IPA/English" target="_blank" rel="noopener">/ˈpɒlɪɡɒn/</a>) is a <a href="https://en.wikipedia.org/wiki/Plane_(mathematics" target="_blank" rel="noopener">plane</a>) <a href="https://en.wikipedia.org/wiki/Shape" target="_blank" rel="noopener">figure</a> that is bounded by a finite chain of straight <a href="https://en.wikipedia.org/wiki/Line_segment" target="_blank" rel="noopener">line segments</a> closing in a loop to form a closed <a href="https://en.wikipedia.org/wiki/Polygonal_chain" target="_blank" rel="noopener">polygonal chain</a> or <em>circuit</em>. (cited from <a href="https://en.wikipedia.org/wiki/Polygon" target="_blank" rel="noopener">wikipedia</a> )<a id="more"></a></p>
<h3 id="近况"><a href="#近况" class="headerlink" title="近况"></a>近况</h3><p>最近一直在学习多边形图形处理方面的知识，非科班出身的我接触到这些知识，首先就是惊叹为什么这些方法这么神奇，同时也充满着迷茫，懵懵懂懂！今天借着除草之际，特将关于多边形图形处理方面的内容记录于此。为啥我要学习这方面的内容呢？与我当前学习的数值算法有关，当解决一个多边形区域内的偏微分方程时，将区域均匀地离散成许多点，对求解精度具有一定的影响。所以，寻找一种理想的离散多边形区域的算法至关重要。前段时间，找到了一篇关于采用区域内点距边界距离函数均匀mesh区域的Paper，受益匪浅，也想亲自写一写来体会其中的奥秘owo。这其中，遇到了几个问题。</p>
<h3 id="如何判断一点在边界内、边界外、边界上？"><a href="#如何判断一点在边界内、边界外、边界上？" class="headerlink" title="如何判断一点在边界内、边界外、边界上？"></a>如何判断一点在边界内、边界外、边界上？</h3><p>在网路上搜索这类算法，有很多，但是，很多并不完备。我觉得很不错的方法是射线法，这让我觉得好神奇，数学的奥妙！如下说：</p>
<p><img src="https://i.loli.net/2017/11/02/59f9fd42d637f.png" alt="草图"></p>
<p>这里的多边形由A、B、C、D、E、F、G 7个顶点围成，其中P1,P2,P3分别为三个判断点。</p>
<p>射线法的基本步骤是，在判断点处作一条水平或者的竖直的射线，如果射线与图形相交的点数为奇数，则点在图形内部，反之则在图形外部。</p>
<p>算法的实施基本是遍历每一条边与点或射线的关系。</p>
<p>这里主要要考虑两种特殊情况，如点P1和P2所示，第一种情况，射线与多边形一条边共线，这里采用的办法是直接不考虑这条边，无视它与射线共线。第二种情况，两条边的交点在射线上，这里处理方法是判断这个交点的纵坐标是否是边端点较大的点，是则记这点为射线与图形的交点，否则忽视。</p>
<p>具体的Matlab实现代码如下：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">s</span> = <span class="title">pointInPolygon</span><span class="params">(p, pv)</span></span></span><br><span class="line"><span class="comment">% pv为多边形的个顶点，这里要求为[x,y],p为判断点</span></span><br><span class="line"><span class="comment">% 判断点是否在多边形内部，是返回1，否返回-1，在边界上返回0</span></span><br><span class="line">n = <span class="built_in">length</span>(pv(:,<span class="number">1</span>));</span><br><span class="line">count = <span class="number">0</span>;</span><br><span class="line">s = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n<span class="number">-1</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">abs</span>((pv(<span class="built_in">i</span>,<span class="number">1</span>)-p(<span class="number">1</span>)).*(pv(<span class="built_in">i</span>+<span class="number">1</span>,<span class="number">2</span>)-p(<span class="number">2</span>))-(pv(<span class="built_in">i</span>+<span class="number">1</span>,<span class="number">1</span>)-p(<span class="number">1</span>)).*(pv(<span class="built_in">i</span>,<span class="number">2</span>)-p(<span class="number">2</span>))) &lt;= <span class="built_in">eps</span> &amp;&amp; ...</span><br><span class="line">            min(pv(<span class="built_in">i</span>:<span class="built_in">i</span>+<span class="number">1</span>,<span class="number">1</span>)) &lt;= p(<span class="number">1</span>) &amp;&amp; p(<span class="number">1</span>) &lt;= max(pv(<span class="built_in">i</span>:<span class="built_in">i</span>+<span class="number">1</span>,<span class="number">1</span>)) &amp;&amp; ...</span><br><span class="line">            min(pv(<span class="built_in">i</span>:<span class="built_in">i</span>+<span class="number">1</span>,<span class="number">2</span>)) &lt;= p(<span class="number">2</span>) &amp;&amp; p(<span class="number">2</span>) &lt;= max(pv(<span class="built_in">i</span>:<span class="built_in">i</span>+<span class="number">1</span>,<span class="number">2</span>))   <span class="comment">% p点在边上</span></span><br><span class="line">        s = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">elseif</span> pv(<span class="built_in">i</span>,<span class="number">2</span>) ~= pv(<span class="built_in">i</span>+<span class="number">1</span>,<span class="number">2</span>) &amp;&amp; max(pv(<span class="built_in">i</span>:<span class="built_in">i</span>+<span class="number">1</span>,<span class="number">1</span>)) &lt;= p(<span class="number">1</span>)     <span class="comment">% 边s非水平且在射线一侧</span></span><br><span class="line">        <span class="keyword">if</span> any(max(pv(<span class="built_in">i</span>:<span class="built_in">i</span>+<span class="number">1</span>,<span class="number">2</span>))==p(<span class="number">2</span>))                         <span class="comment">% 边的端点（纵坐标较大的点）在射线上</span></span><br><span class="line">            count = count + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">elseif</span> min(pv(<span class="built_in">i</span>:<span class="built_in">i</span>+<span class="number">1</span>,<span class="number">2</span>)) &lt; p(<span class="number">2</span>) &amp;&amp; p(<span class="number">2</span>) &lt; max(pv(<span class="built_in">i</span>:<span class="built_in">i</span>+<span class="number">1</span>,<span class="number">2</span>)) <span class="comment">% 边与射线相交</span></span><br><span class="line">            count = count + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">mod</span>(count,<span class="number">2</span>)==<span class="number">1</span> &amp;&amp; s ~= <span class="number">0</span></span><br><span class="line">    s = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">elseif</span> s ~= <span class="number">0</span></span><br><span class="line">    s = <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="如何求得点到多边形边界的距离"><a href="#如何求得点到多边形边界的距离" class="headerlink" title="如何求得点到多边形边界的距离"></a>如何求得点到多边形边界的距离</h3><p>这里比较简单了，计算点到每条边的距离，取最小值。但是，要考虑垂足是否落在边上。这里不赘述，实现的Matlab代码如下:</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">d</span> = <span class="title">pointToSegmentDist</span><span class="params">(p, a, b)</span></span></span><br><span class="line"><span class="comment">% a,b,p均为一点的坐标</span></span><br><span class="line">ab = b - a;</span><br><span class="line">ap = p - a;</span><br><span class="line">t = sum(ab.*ap, <span class="number">2</span>)/sum(ab.*ab, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">if</span> t &lt; <span class="number">0</span></span><br><span class="line">    d = norm(ap);</span><br><span class="line"><span class="keyword">elseif</span> t &gt; <span class="number">1</span></span><br><span class="line">    bp = p - b;</span><br><span class="line">    d = norm(bp);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    ad = t * ab;</span><br><span class="line">    d = norm(ad - ap);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="Be-a-Cyberslacker"><a href="#Be-a-Cyberslacker" class="headerlink" title="Be a Cyberslacker"></a>Be a Cyberslacker</h3><p>日常摸鱼的我，终于学到了一个准确描述摸鱼的单字owo——cyberslack。生生不息，摸鱼不止，已成为摸鱼党的工作信条了。回想过往的半个月，混混沌沌，挖了各种坑，但是不填！无奈，只好将摸鱼之时学到的知识搬到这里来充实一下自己因摸鱼无比空虚的内心owo。抬头一看，又忽然发觉那本还没看完的《撒哈拉的故事》，OTZ，再次立一个flag，下一篇拔草文之前看完owo。最近被老师感染着快要有创业的想法了，只是，总感觉自己要学的内容实在太多了，如果留下来继续的话，会很不安心的owo。如果我学会了优雅地摸鱼，也许我会留下吧。</p>
<p>Ummm，前些天玩了慢慢罪恶感的Undertale，已经到了最后的关卡了，但是感觉自己已经过不去了qwq，膜拜大神。</p>
<p>Ummm，昨天是万圣节，看见了竹萌里好多大佬的房子，献上我的膝盖owo，当然，最惬意的还是Trick or treat，真的敲开心owo！</p>
<p>Ummm，今天是凛喵的生日，很可惜，全部保底，明天集齐50♥看自己是不是非酋。</p>
<p>Ummm，拔草怎么越拔越不想睡觉呢？但是我已经写不下去了，词穷，滚去睡了~~~~</p>
<p>Oyasumi! The whole world.</p>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/study/">study</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/cyberslack/">cyberslack</a></li></ul></footer></article><div class="comments" id="lv-container" data-id="city" data-uid="MTAyMC8zMjExMS84Njc1"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2016-2017 huangwang</div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
ga('create','UA-87613819-1');
ga('send','pageview');</script><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>